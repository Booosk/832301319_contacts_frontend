<view class="container">
  <!-- 头部 -->
  <view class="header card">
    <view class="title-section">
      <text class="title">➕ 添加联系人</text>
      <text class="subtitle">填写联系人详细信息</text>
    </view>
  </view>

  <!-- 表单 -->
  <view class="form card">
    <!-- 照片上传 -->
    <view class="form-item">
      <text class="label">📷 联系人照片</text>
      <view class="photo-section">
        <view class="photo-upload-area" bindtap="choosePhoto">
          <view wx:if="{{!photo}}" class="upload-placeholder">
            <text class="upload-icon">➕</text>
            <text class="upload-text">添加照片</text>
            <text class="upload-tip">可选，支持拍照或相册</text>
          </view>
          <view wx:else class="photo-preview" bindtap="previewPhoto">
            <image src="{{photo}}" class="preview-image" mode="aspectFill" />
            <view class="photo-overlay">
              <text class="overlay-text">点击预览</text>
            </view>
          </view>
        </view>
        
        <button wx:if="{{photo}}" class="remove-photo-btn" bindtap="removePhoto" disabled="{{isUploadingPhoto}}">
          ✕ 删除
        </button>
      </view>
      <text wx:if="{{isUploadingPhoto}}" class="uploading-text">照片上传中...</text>
    </view>

    <!-- 姓名 -->
    <view class="form-item">
      <text class="label required">👤 姓名</text>
      <input 
        class="input-field {{errors.name ? 'error' : ''}}"
        value="{{name}}"
        bindinput="onNameInput"
        placeholder="请输入联系人姓名"
        maxlength="20"
      />
      <text class="error-text" wx:if="{{errors.name}}">{{errors.name}}</text>
    </view>

    <!-- 电话 -->
    <view class="form-item">
      <text class="label required">📱 手机号</text>
      <input 
        class="input-field {{errors.phone ? 'error' : ''}}"
        value="{{phone}}"
        bindinput="onPhoneInput"
        placeholder="请输入11位手机号"
        type="number"
        maxlength="11"
      />
      <text class="error-text" wx:if="{{errors.phone}}">{{errors.phone}}</text>
    </view>

    <!-- 邮箱 -->
    <view class="form-item">
      <text class="label">📧 邮箱</text>
      <input 
        class="input-field {{errors.email ? 'error' : ''}}"
        value="{{email}}"
        bindinput="onEmailInput"
        placeholder="请输入邮箱地址（可选）"
        type="email"
      />
      <text class="error-text" wx:if="{{errors.email}}">{{errors.email}}</text>
    </view>

    <!-- 地址 -->
    <view class="form-item">
      <text class="label">🏠 地址</text>
      <input 
        class="input-field"
        value="{{address}}"
        bindinput="onAddressInput"
        placeholder="请输入联系地址（可选）"
      />
    </view>

    <!-- 按钮组 -->
    <view class="button-group">
      <button class="secondary-btn" bindtap="resetForm" disabled="{{isSubmitting}}">
        重置
      </button>
      <button class="primary-btn" bindtap="submitForm" disabled="{{isSubmitting}}">
        {{isSubmitting ? '添加中...' : '添加联系人'}}
      </button>
    </view>
  </view>

  <!-- 表单提示 -->
  <view class="tips-card card">
    <text class="tips-title">💡 填写提示</text>
    <view class="tip-item"> 姓名和手机号为必填项</view>
    <view class="tip-item"> 手机号必须是11位有效号码</view>
    <view class="tip-item"> 可为联系人上传照片（拍照或相册选择）</view>
    <view class="tip-item"> 所有信息均可后续修改</view>
  </view>
</view>