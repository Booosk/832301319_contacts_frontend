<view class="container">
  <!-- å¤´éƒ¨ -->
  <view class="header card">
    <view class="title-section">
      <text class="title">å­¦å‹é€šè®¯å½•</text>
      <text class="subtitle">ç®¡ç†æ‚¨çš„è”ç³»äººä¿¡æ¯</text>
     
    </view>
    <button class="add-btn" bindtap="goToAdd">
      <text class="btn-icon">æ·»åŠ è”ç³»äºº</text>
     
    </button>
  </view>
<!-- ç»Ÿè®¡å¡ç‰‡ -->
<view class="stats-card card" wx:if="{{contacts.length > 0}}">
    <view class="stat-item">
      <text class="stat-number">{{stats.total}}</text>
      <text class="stat-label">æ€»è”ç³»äºº</text>
    </view>
    <view class="stat-item">
      <text class="stat-number">{{stats.hasPhoto}}</text>
      <text class="stat-label">æœ‰ç…§ç‰‡</text>
    </view>
    <view class="stat-item">
      <text class="stat-number">{{stats.hasEmail}}</text>
      <text class="stat-label">æœ‰é‚®ç®±</text>
    </view>
  </view>

  <!-- æœç´¢æ¡† -->
  <view class="search-box card" wx:if="{{contacts.length > 0}}">
    <view class="search-container">
      <text class="search-icon">ğŸ”</text>
      <input 
        class="search-input" 
        placeholder="æœç´¢å§“åã€ç”µè¯ã€é‚®ç®±..." 
        bindinput="onSearchInput"
        value="{{searchText}}"
      />
      <text class="clear-icon" wx:if="{{searchText}}" bindtap="clearSearch">âœ•</text>
    </view>
  </view>

  <!-- è”ç³»äººåˆ—è¡¨ -->
  <view class="contact-list card">
    <view wx:if="{{filteredContacts.length === 0 && searchText}}" class="empty-state">
      <text class="empty-text">ğŸ” æ²¡æœ‰æ‰¾åˆ°ç›¸å…³è”ç³»äºº</text>
      <text class="empty-tip">å°è¯•è°ƒæ•´æœç´¢å…³é”®è¯</text>
      <button class="clear-search-btn" bindtap="clearSearch">æ¸…é™¤æœç´¢</button>
    </view>
    
    <view wx:if="{{filteredContacts.length === 0 && !searchText && !isLoading}}" class="empty-state">
      <text class="empty-text">ğŸ“­ é€šè®¯å½•ç©ºç©ºå¦‚ä¹Ÿ</text>
      <text class="empty-tip">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ ç¬¬ä¸€ä¸ªè”ç³»äººå§ï¼</text>
    </view>

    <!-- ä¼˜åŒ–åçš„æ¨ªå‘å¡ç‰‡å¸ƒå±€ -->
    <view class="contacts-grid">
      <view 
        wx:for="{{filteredContacts}}" 
        wx:key="id" 
        class="contact-card"
      >
        <!-- å¤´åƒ/ç…§ç‰‡åŒºåŸŸ -->
        <view class="card-avatar" bindtap="previewPhoto" data-photo="{{item.photo}}">
          <image wx:if="{{item.photo}}" src="{{item.photo}}" class="avatar-image" mode="aspectFill" />
          <text wx:else class="avatar-text">{{item.name.charAt(0)}}</text>
          <text wx:if="{{item.photo}}" class="photo-indicator">ğŸ“·</text>
        </view>
        
        <!-- è”ç³»äººä¿¡æ¯ -->
        <view class="card-content">
          <view class="main-info">
            <view class="name-row">
              <text class="name">{{item.name}}</text>
              <text class="id-tag">#{{item.id}}</text>
            </view>
            
            <view class="phone-row">
              <text class="phone-icon">ğŸ“±</text>
              <text class="phone">{{item.phone}}</text>
              <button class="call-btn" bindtap="makeCall" data-phone="{{item.phone}}">æ‹¨æ‰“</button>
            </view>
          </view>
          
          <!-- é¢å¤–ä¿¡æ¯ -->
          <view class="extra-info" wx:if="{{item.email || item.address}}">
            <text class="email" wx:if="{{item.email}}">ğŸ“§ {{item.email}}</text>
            <text class="address" wx:if="{{item.address}}">ğŸ  {{item.address}}</text>
          </view>
          
          <!-- ç¼–è¾‘åˆ é™¤æŒ‰é’® - å§‹ç»ˆåœ¨æœ€åº•éƒ¨ -->
          <view class="bottom-actions">
            <button class="edit-btn" bindtap="editContact" data-id="{{item.id}}">ç¼–è¾‘</button>
            <button class="delete-btn" bindtap="deleteContact" data-id="{{item.id}}">åˆ é™¤</button>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{isLoading}}" class="loading-state">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
</view>